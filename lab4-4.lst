QAflisp - FLISP Absolute crossassembler, Version 1.3
(c) GMV 1989-2023


File: lab4-4.lst
FC                      1. Inport	EQU	$FC
---- File: "lab4-4.sflisp"
FB                      2. Utport	EQU	$FB
05                      3. DelayC1	EQU	$5		;Dessa konstanter styr hur lång fördröjning Delay1s orsakar.
02                      4. DelayC2	EQU	$2		;Ändra dem eventuellt i labbet så att fördröjnigen blir rimligt lång.
                        5. 
FF                      6. 	ORG	$FF
FF 20                   7. 	FCB	$20
                        8. 
20                      9. 	ORG	$20
                       10. 
20                     11. Main:
20 21 FE               12. 	BRA	Main
                       13. 
                       14. 
22                     15. ReadAscii:
22 43                  16. 	RTS
                       17. 
                       18. 
23                     19. 	
23                     20. BlinkLight:
23 43                  21. 	RTS
24                     22. 	
24                     23. 	
                       24. ; Orsakar en fördröjning på ungefär 1s i simulatorn (vid snabb exekveringshastighet)
                       25. ; Ändrar inga register
24                     26. Delay1s:
24 10                  27. 	PSHA
25 11                  28. 	PSHX
26 13                  29. 	PSHC
27 90 02               30. 	LDX	#DelayC2
29                     31. Delay1s_loop2:
29 F0 05               32. 	LDA	#DelayC1
2B                     33. Delay1s_loop:
2B 08                  34. 	DECA
2C 25 FD               35. 	BNE	Delay1s_loop
2E CC FF               36. 	LEAX	-1,X
30 9C 00               37. 	CMPX	#0
32 25 F5               38. 	BNE	Delay1s_loop2
34 17                  39. 	PULC
35 15                  40. 	PULX
36 14                  41. 	PULA
37 43                  42. 	RTS
                       43. 
                       44. ; Data - Variabler
38                     45. Count:
38 00                  46. 	RMB	1
                       47. 
                       48. ; Data - Konstanter
39                     49. MorseCode:
39 02 40               50. 	FCB	2,%01000000 ;'A'
3B 04 80               51. 	FCB	4,%10000000 ;'B'
3D 04 A0               52. 	FCB	4,%10100000 ;'C'
3F 03 80               53. 	FCB	3,%10000000 ;'D'
41 01 00               54. 	FCB	1,%00000000 ;'E'
43 04 20               55. 	FCB	4,%00100000 ;'F'
45 03 C0               56. 	FCB	3,%11000000 ;'G'
47 04 00               57. 	FCB	4,%00000000 ;'H'
49 02 00               58. 	FCB	2,%00000000 ;'I'
4B 04 70               59. 	FCB	4,%01110000 ;'J'
4D 03 A0               60. 	FCB	3,%10100000 ;'K'
4F 04 40               61. 	FCB	4,%01000000 ;'L'
51 02 C0               62. 	FCB	2,%11000000 ;'M'
53 02 80               63. 	FCB	2,%10000000 ;'N'
55 03 E0               64. 	FCB	3,%11100000 ;'O'
57 04 60               65. 	FCB	4,%01100000 ;'P'
59 04 D0               66. 	FCB	4,%11010000 ;'Q'
5B 03 40               67. 	FCB	3,%01000000 ;'R'
5D 03 00               68. 	FCB	3,%00000000 ;'S'
5F 01 80               69. 	FCB	1,%10000000 ;'T'
61 03 20               70. 	FCB	3,%00100000 ;'U'
63 04 10               71. 	FCB	4,%00010000 ;'V'
65 03 60               72. 	FCB	3,%01100000 ;'W'
67 04 90               73. 	FCB	4,%10010000 ;'X'
69 04 B0               74. 	FCB	4,%10110000 ;'Y'
6B 04 C0               75. 	FCB	4,%11000000 ;'Z'
6D                     76. 	
6D                     77. 	
6D                     78. 	
6D                     79. 	
6D                     80. 	
6D                     81. 	
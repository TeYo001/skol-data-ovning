QAflisp - FLISP Absolute crossassembler, Version 1.3
(c) GMV 1989-2023


File: RunDiodeDelay.lst
FB                      1. LED: 	EQU $FB
---- File: "RunDiodeDelay.sflisp"
                        2. 
                        3. 
20                      4. 	ORG $20
20                      5. start:
20 A2 20                6. 	LDSP $20 ; Load 0x20 into SP
22 34 26                7. 	JSR main ; Call main
24 33 20                8. 	JMP start ; Restart program
26                      9. main:
26 01 00               10. 	ANDCC #0 ; Zero-set CC
28 F0 01               11. 	LDA #1 ; A = 1
2A                     12. main_1:
2A E1 FB               13. 	STA LED ; M(LED) = A
2C 0B                  14. 	LSLA ; A = A << 1
2D 95 00               15. 	ADCA #0 ; A = A + Carry
2F 34 33               16. 	JSR Delay ; Call Delay
31 33 2A               17. 	JMP main_1 ; Continue
33                     18. 	
33                     19. Delay:
33                     20. 	; Save
33 10                  21. 	PSHA
34 13                  22. 	PSHC
35 F0 FF               23. 	LDA #$FF ; A = 255
37                     24. Delay_1:
37                     25. 	; while (A != 0) A--;
37 08                  26. 	DECA
38 09                  27. 	TSTA
39 25 FC               28. 	BNE Delay_1
3B                     29. 	; Restore
3B 17                  30. 	PULC
3C 14                  31. 	PULA
3D 43                  32. 	RTS ; Return
                       33. 
3E                     34. 	; Put start on OxFF 
FF                     35. 	ORG $FF
FF 20                  36. 	FCB start